<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Charles C.D. â€“ Optional configuration</title>
    <link>https://docs.charlescd.io/get-started/optional-configuration/</link>
    <description>Recent content in Optional configuration on Charles C.D.</description>
    <generator>Hugo -- gohugo.io</generator>
    
	  <atom:link href="https://docs.charlescd.io/get-started/optional-configuration/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>Get Started: Authentication with private registry</title>
      <link>https://docs.charlescd.io/get-started/optional-configuration/authentication-with-private-registry/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://docs.charlescd.io/get-started/optional-configuration/authentication-with-private-registry/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2&gt;&lt;strong&gt;Why do you need to authenticate?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Authentication is required if you use a private registry. This way, the cluster will be able to communicate with your registry to pull the images.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;How do you authenticate?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Kubernetes cluster uses a type of docker-registry &lt;strong&gt;Secret&lt;/strong&gt; to authenticate the registry container. You have to generate it.&lt;/p&gt;


&lt;div class=&#34;alert alert-info&#34; role=&#34;alert&#34;&gt;

For more information on how to generate the Secret that will be applied in your cluster, &lt;a href=&#34;https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/&#34;&gt;&lt;strong&gt;check out the Kubernetes documentation&lt;/strong&gt;&lt;/a&gt;.
&lt;/div&gt;

&lt;p&gt;Once you generate the secret, it will look like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;apiVersion: v1
data:
  .dockerconfigjson: &amp;lt;&amp;lt;your value&amp;gt;&amp;gt;
kind: Secret
metadata:
  name: &amp;lt;&amp;lt;registry-name&amp;gt;&amp;gt;
type: kubernetes.io/dockerconfigjson
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After this, you&amp;rsquo;ll need to apply this information in the namespace where your applications will be deployed by Charles:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;kubectl -n your-namespace apply secret-registry.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After completing these steps, your cluster will be able to maintain communication with the registry.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Get Started: Configuring your ingress</title>
      <link>https://docs.charlescd.io/get-started/optional-configuration/configuring-your-ingress/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://docs.charlescd.io/get-started/optional-configuration/configuring-your-ingress/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;p&gt;If you want to use your own ingress instead of the one provided with Charles&#39; installation, follow the next step:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;On &lt;code&gt;charlescd/install/helm-chart/values.yaml&lt;/code&gt;, change the &lt;strong&gt;&lt;code&gt;enabled&lt;/code&gt;&lt;/strong&gt; value to &lt;strong&gt;&lt;code&gt;true&lt;/code&gt;&lt;/strong&gt;, like the example below:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;ingress:
  enabled: true
  host: charles.info.example
  class: nginx

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Get Started: Configuring MTLS</title>
      <link>https://docs.charlescd.io/get-started/optional-configuration/configuring-mtls/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://docs.charlescd.io/get-started/optional-configuration/configuring-mtls/</guid>
      <description>
        
        
        &lt;hr&gt;


&lt;div class=&#34;alert alert-info&#34; role=&#34;alert&#34;&gt;

Mutual Transport Layer Security (MTLS) is recommended when you want to &lt;strong&gt;install Charles in a different cluster where your applications are.&lt;/strong&gt;
&lt;/div&gt;

&lt;p&gt;This configuration is necessary to guarantee safe communication between Charles&#39; services because they can be exposed in a different cluster. In this scenario, only one Charles component needs to be in the same cluster of your applications: &lt;code&gt;charlescd-butler&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;How to enable MTLS?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Follow the steps below to enable MTLS in your application:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 1:&lt;/strong&gt; Access &lt;code&gt;charlescd/install/mtls-job/values.yaml&lt;/code&gt;  and add the domain where you will use Charles, see the example below:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;mtls:
  domain: .charles.com
  enabled: true

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Step 2:&lt;/strong&gt; Run the manifest, it generates secrets with certificates for each component and the certified authority.&lt;/p&gt;


&lt;div class=&#34;alert alert-warning&#34; role=&#34;alert&#34;&gt;

The certificates generated will be self-signed.
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Step 3:&lt;/strong&gt; In the project&amp;rsquo;s root folder, run the command below:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;helm install mtls-job ./install/mtls-job/ --namespace charlescd --values=./install/mtls-job/values.yaml

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Step 4:&lt;/strong&gt; If you want to use your own certificates and not the ones generated by the job,  &lt;a href=&#34;https://github.com/ZupIT/charlescd/blob/security/mtls/install/helm-chart/scripts/create-tls-secrets.sh&#34;&gt;&lt;strong&gt;use the &amp;lsquo;create secrets&amp;rsquo; script&lt;/strong&gt;&lt;/a&gt; to help you create secrets.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 5:&lt;/strong&gt; Copy a cluster&amp;rsquo;s secret to another, and now:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Copy the secrets inside the yaml&amp;rsquo;s manifests, to do that use &lt;a href=&#34;https://github.com/ZupIT/charlescd/blob/security/mtls/install/helm-chart/scripts/copy-secrets.sh&#34;&gt;&lt;strong&gt;&amp;lsquo;copy secrets&amp;rsquo; script&lt;/strong&gt;&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;Apply the manifest in the destination cluster using the &lt;a href=&#34;https://github.com/ZupIT/charlescd/blob/security/mtls/install/helm-chart/scripts/apply-secrets.sh&#34;&gt;&lt;strong&gt;&amp;lsquo;apply secrets&amp;rsquo; script&lt;/strong&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Step 6:&lt;/strong&gt; Access &lt;code&gt;charlescd/install/helm-chart/values.yaml&lt;/code&gt;  in moove&amp;rsquo;s configuration and change the property value  &lt;code&gt;mtls/enabled&lt;/code&gt; to &lt;code&gt;true&lt;/code&gt;. Check out below:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;moove:
    mtls:
      enabled: true

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Step 7:&lt;/strong&gt; Make the same change you did in step 6, but now for the &lt;strong&gt;butler component&lt;/strong&gt;, when you want to install in another cluster, see the example below:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;butler:
    mtls:
        enabled: true

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Step 8:&lt;/strong&gt; After that, follow &lt;a href=&#34;https://docs.charlescd.io/get-started/installing-charles/overview/&#34;&gt;&lt;strong&gt;Charles&#39; installation steps&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Get Started: Defining the Identity Manager</title>
      <link>https://docs.charlescd.io/get-started/optional-configuration/defining-the-identity-manager/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://docs.charlescd.io/get-started/optional-configuration/defining-the-identity-manager/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h3&gt;&lt;strong&gt;What is Identity Manager (IDM)?&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;It is responsible to manage the user identity that will access any application, in this case, Charles.&lt;/p&gt;


&lt;div class=&#34;alert alert-info&#34; role=&#34;alert&#34;&gt;

When a user access Charles, it is verified which manager was configured during the installation, to make an identity validation of the user.
&lt;/div&gt;

&lt;p&gt;In the example below, you can see a flow where there is a verification of what configuration was made to manage the users. In this case, when a user tries to access Charles and it is not yet authenticated, if a customized IDM has been configurated, for example, Google, the user will be redirected to Google&amp;rsquo;s page to proceed with the authentication. If this is not the scenario, Charles&#39; authentication screen is returned to continue the flow.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://docs.charlescd.io/shared/untitled-diagram-1-.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Why do you have to configure an IDM?&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;It is necessary to have an identity manager to make sure Charle&amp;rsquo;s accesses are safe. For this, Charles offers two options:&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Default IDM&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;On Charles default installation, it already has Keycloak that it is used to manage the users. If you don&amp;rsquo;t have a customized IDM, you can use this one.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;External IDM&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;In case you already have your own identity manager, it is necessary to change some installation variables. For that, follow the instructions in the [&lt;strong&gt;IDM&amp;rsquo;s section.&lt;/strong&gt;]
(https://docs.charlescd.io/reference/identity-manager/).&lt;/p&gt;


&lt;div class=&#34;alert alert-info&#34; role=&#34;alert&#34;&gt;

&lt;p&gt;There are some blocked flows when using an external IDM, see below:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create users;&lt;/li&gt;
&lt;li&gt;Change password;&lt;/li&gt;
&lt;li&gt;Reset password;&lt;/li&gt;
&lt;li&gt;Delete users.&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;


      </description>
    </item>
    
  </channel>
</rss>
